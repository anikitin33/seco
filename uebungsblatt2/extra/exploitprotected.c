#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void doit(char *buf) {
  gets(buf);
}

long getlongorexit(const char *s) {
  char *rest;
  long val = strtol(s, &rest, 10);
  if (rest != s+strlen(s)) {
    printf("abort\n");
    exit(-1);
  }
  return val;
}

const int target = 0x17171742;

int main(int argc, char *argv[]) {
  char buf[16];
  int val = random();
  
  doit(buf);  
  for (size_t i=1; i+1 < argc; i+=2) {
    buf[getlongorexit(argv[i])] = (char) getlongorexit(argv[i+1]);
  }
  printf("modified input: %s\n", buf);
  if (val == target) {
    printf("success\n");
  } else {
    printf("nope: want=%8x, got=%8x\n", target, val);
  }
}
